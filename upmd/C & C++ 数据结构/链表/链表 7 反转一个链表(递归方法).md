```
#include <iostream>
using std::cout;
using std::cin;

struct node{
	int data;
	node *next;
};
struct node *head,*tail;

void Insert(int data) {
	node *temp = new node();
	temp->data = data;
	temp->next = NULL;
	if (head == NULL) head = temp;
	else tail->next = temp;
	tail = temp;
}

void Print(node *temp) {
	if (temp == NULL) return;
	cout << temp->data << ' ';
	Print(temp->next); 
}

void RestPrint(node *temp) {
	if (temp == NULL) return;
	RestPrint(temp->next);
	cout << temp->data << ' ';
} 

void RestNode(node *temp1) {
	if (temp1->next == NULL) {
		head = temp1;
		return;
	}
	RestNode(temp1->next);
	// temp1->next->next = temp1; 
	node *temp2 = temp1->next;
	temp2->next = temp1;
	temp1->next = NULL;
}

int main() {
	head = NULL;
	int N;
	while (1) {
		cout << ':';
		cin >> N;
		if (N == 999) break; 
		Insert(N);
	}
	Print(head);
	cout << '\n';
	RestPrint(head);
	RestNode(head);
	cout << '\n';
	Print(head);
	RestNode(head);
	cout << '\n';
	Print(head);
} 
```